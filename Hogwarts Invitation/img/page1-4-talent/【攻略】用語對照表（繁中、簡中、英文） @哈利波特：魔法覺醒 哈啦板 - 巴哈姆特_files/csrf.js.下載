(function(window,$,Cookies){"use strict";let Csrf=function(token){const HEADER_NAME="X-Bahamut-Csrf-Token";const COOKIE_NAME="ckBahamutCsrfToken";const FIELD_NAME="bahamutCsrfToken";if(!/^[a-f0-9]{16}$/.test(token)){token="";for(let i=0;i<8;i++){let hex=Math.floor(Math.random()*256).toString(16);if(hex.length==1){hex="0"+hex}token+=hex}}this.setCookie=function(){Cookies.set(COOKIE_NAME,token,{domain:".gamer.com.tw",path:"/",secure:true})};this.appendFormField=function(formSelector){$("<input>").attr({type:"hidden",name:FIELD_NAME}).val(token).appendTo(formSelector)};this.getJqueryData=function(data){if(typeof data==="object"&&data!==null){data[FIELD_NAME]=token}else{data={[FIELD_NAME]:token}}return data};this.getJqueryHeaders=function(headers){if(typeof headers==="object"&&headers!==null){headers[HEADER_NAME]=token}else{headers={[HEADER_NAME]:token}}return headers};this.getFetchHeaders=function(headers){if(typeof headers==="object"&&headers!==null){headers.append(HEADER_NAME,token)}else{headers=new Headers({[HEADER_NAME]:token})}return headers};this.toString=function(){return token}};window.Bahamut=window.Bahamut||{};window.Bahamut.Csrf=Csrf})(window,jQuery,Cookies);